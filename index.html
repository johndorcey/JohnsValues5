<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>John’s Values • Tap Simulator</title>

  <style>
    :root{
      --bg:#0b0b12;
      --text:#ffffff;
      --muted:#b8b8c8;
      --line:rgba(255,255,255,0.08);
      --shadow: 0 18px 40px rgba(0,0,0,0.35);
      --radius:18px;

      --accent:#46d6ff;
      --accent2:#7c4dff;
    }
    *{ box-sizing:border-box; }
    html, body { height:100%; }

    body{
      margin:0;
      font-family: Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 10% 10%, rgba(70,214,255,0.15), transparent 60%),
        radial-gradient(700px 500px at 90% 0%, rgba(124,77,255,0.14), transparent 55%),
        radial-gradient(900px 700px at 60% 120%, rgba(255,210,77,0.10), transparent 55%),
        var(--bg);
      background-attachment: fixed;          /* ✅ stops the “random background change” at bottom */
      background-repeat: no-repeat;
    }
    body.noScroll{ overflow:hidden; }

    /* ===== CLEAN DARK SCROLLBAR (PC) ===== */
    *::-webkit-scrollbar{ width: 10px; height: 10px; }
    *::-webkit-scrollbar-track{
      background: rgba(255,255,255,0.03);
      border-left: 1px solid rgba(255,255,255,0.05);
    }
    *::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,0.12);
      border-radius: 999px;
      border: 2px solid rgba(0,0,0,0.35);
    }
    *::-webkit-scrollbar-thumb:hover{
      background: rgba(255,255,255,0.18);
    }
    /* Firefox */
    *{
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.16) rgba(255,255,255,0.03);
    }

    .app{
      display:grid;
      grid-template-columns: 330px 1fr;
      gap: 18px;
      padding: 18px;
      max-width: 1300px;
      margin: 0 auto;
    }

    /* ===== SIDEBAR (DESKTOP DEFAULT) ===== */
    .sidebar{
      background: linear-gradient(180deg, rgba(18,18,34,0.9), rgba(12,12,18,0.9));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      position: sticky;
      top: 18px;
      height: calc(100vh - 36px);
      overflow:auto;
      z-index: 10;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px;
      border-radius: 16px;
      background: rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.06);
    }

    .brandMark{
      width: 54px;
      height: 44px;
      border-radius: 14px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      letter-spacing: 0.5px;
      color: #0b0b12;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      font-size: 11px;
      text-transform: uppercase;
      padding: 0 8px;
    }

    .brandTitle{ font-size: 18px; font-weight: 900; }
    .brandSub{ margin-top: 2px; color: var(--muted); font-size: 12px; }

    .meta{
      margin-top: 12px;
      padding: 12px;
      border-radius: 16px;
      background: rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.06);
    }
    .metaLine{ color: var(--muted); font-size: 13px; }

    .discordBtn{
      margin-top: 10px;
      display:block;
      text-align:center;
      padding: 12px 12px;
      border-radius: 14px;
      text-decoration:none;
      font-weight: 900;
      color: #0b0b12;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
    }
    .updated{ margin-top: 10px; color: var(--muted); font-size: 12px; }

    .panel{
      margin-top: 12px;
      padding: 12px;
      border-radius: 16px;
      background: rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.06);
    }
    .panelTitle{ font-weight: 900; margin-bottom: 10px; letter-spacing: 0.2px; }

    .input{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(10,10,18,0.65);
      color: white;
      outline:none;
      font-size: 15px;
    }
    .hint{ margin-top: 8px; color: var(--muted); font-size: 12px; }

    .tabs{ display:flex; flex-direction:column; gap:8px; }

    .tab-btn{
      text-align:left;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,0.08);
      background: rgba(10,10,18,0.55);
      color: white;
      cursor:pointer;
      font-weight: 800;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
      font-size: 14px;
    }
    .tab-btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,0.18); }
    .tab-btn.active{
      background: linear-gradient(135deg, rgba(70,214,255,0.20), rgba(124,77,255,0.16));
      border-color: rgba(70,214,255,0.35);
    }

    .check{
      display:flex;
      gap:10px;
      align-items:center;
      margin-top: 10px;
      color: var(--muted);
      font-size: 13px;
      user-select:none;
    }
    .check input{ transform: scale(1.15); }

    .resetBtn{
      margin-top: 12px;
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
      color: white;
      font-weight: 900;
      cursor:pointer;
      font-size: 14px;
    }
    .resetBtn:hover{ background: rgba(255,255,255,0.08); }

    .main{
      border-radius: var(--radius);
      overflow:hidden;
      border:1px solid var(--line);
      box-shadow: var(--shadow);
      background: linear-gradient(180deg, rgba(18,18,34,0.55), rgba(12,12,18,0.65));
      display:flex;
      flex-direction:column;
      min-height: calc(100vh - 36px);
    }

    .topbar{
      padding: 16px 16px 12px 16px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
      background: rgba(0,0,0,0.12);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }

    .heroTitle{ font-size: 20px; font-weight: 1000; letter-spacing: 0.3px; }
    .heroSub{ margin-top: 4px; color: var(--muted); font-size: 13px; }

    .stats{ margin-top: 10px; display:flex; gap:10px; flex-wrap:wrap; }
    .pill{
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
      color: var(--muted);
      font-size: 12px;
      font-weight: 800;
    }
    .pill b{ color:white; }

    #content{ padding: 16px; }

    .pet-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
    }

    .pet-card{
      position: relative;
      border-radius: 20px;
      padding: 12px;
      background: linear-gradient(180deg, rgba(20,20,39,0.9), rgba(12,12,18,0.9));
      border: 1px solid rgba(255,255,255,0.08);
      overflow:hidden;
    }

    .pet-card::before{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(500px 120px at 20% 0%, rgba(70,214,255,0.16), transparent 55%);
      pointer-events:none;
    }

    .petHead{ display:flex; gap: 12px; align-items:center; }

    .petImgWrap{
      width: 86px;
      height: 86px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.20);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .petImgWrap img{ width: 100%; height: 100%; object-fit: contain; }

    .petTitle{ text-align:left; flex: 1; }
    .petTitle h3{ margin:0; font-size: 16px; }

    .tagRow{ margin-top: 6px; display:flex; gap: 8px; flex-wrap:wrap; }
    .tag{
      font-size: 11px;
      padding: 6px 9px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
      color: var(--muted);
      font-weight: 900;
    }

    /* ===== DEMAND TAGS (sleek / text coloured only) ===== */
    .tag.demand{
      font-weight: 1000;
      letter-spacing: 0.2px;
      background:
        linear-gradient(rgba(12,12,18,0.55), rgba(12,12,18,0.55)) padding-box,
        linear-gradient(135deg, rgba(255,255,255,0.22), rgba(255,255,255,0.06)) border-box;
      border: 1px solid transparent;
      box-shadow: 0 10px 18px rgba(0,0,0,0.22);
    }

    .tag.demand.high{ color: #54ff9b; text-shadow: 0 0 12px rgba(84,255,155,0.18); }
    .tag.demand.mid { color: #ffd24d; text-shadow: 0 0 12px rgba(255,210,77,0.16); }
    .tag.demand.low { color: #ff5c5c; text-shadow: 0 0 12px rgba(255,92,92,0.16); }

    .table{ margin-top: 10px; display:grid; gap:8px; }
    .row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding: 10px 10px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.04);
      font-weight: 800;
      font-size: 14px;
    }
    .row span:first-child{ color: var(--muted); font-weight: 900; }
    .row .n{ color: white; }

    /* ALWAYS visible + nicer colours */
    .row .g{
      color: #ffd36b;
      text-shadow: 0 0 12px rgba(255, 208, 96, 0.25);
    }
    .row .r{
      color: #bff6ff;
      text-shadow: 0 0 12px rgba(120, 220, 255, 0.22);
    }

    /* pill behind values */
    .row span:last-child{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 70px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.04);
    }

    .row span.g{
      background: linear-gradient(
        90deg,
        rgba(155, 106, 16, 0.22),
        rgba(255, 211, 107, 0.16),
        rgba(255, 241, 176, 0.12)
      );
      border-color: rgba(255, 211, 107, 0.22);
    }

    .row span.r{
      background: linear-gradient(90deg,
        rgba(255, 59, 59, 0.16),
        rgba(255, 138, 0, 0.14),
        rgba(255, 208, 0, 0.14),
        rgba(33, 208, 122, 0.14),
        rgba(42, 167, 255, 0.14),
        rgba(122, 92, 255, 0.14),
        rgba(255, 79, 216, 0.16)
      );
      border-color: rgba(180, 230, 255, 0.20);
    }

    .actions{ margin-top: 10px; display:flex; gap:10px; }

    .btn{
      flex:1;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
      color: white;
      font-weight: 900;
      cursor:pointer;
      text-decoration:none;
      text-align:center;
      font-size: 14px;
    }
    .btn:hover{ background: rgba(255,255,255,0.08); }

    .btn.primary{
      border-color: rgba(70,214,255,0.35);
      background: linear-gradient(135deg, rgba(70,214,255,0.16), rgba(124,77,255,0.12));
    }

    .toast{
      position: fixed;
      bottom: 18px;
      right: 18px;
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(10,10,18,0.92);
      border:1px solid rgba(255,255,255,0.12);
      color:white;
      font-weight: 900;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity .18s ease, transform .18s ease;
      pointer-events:none;
      box-shadow: var(--shadow);
      z-index: 100;
    }
    .toast.show{ opacity: 1; transform: translateY(0); }

    /* ===== MOBILE DRAWER UI ===== */
    .backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      opacity: 0;
      pointer-events: none;
      transition: opacity .18s ease;
      z-index: 40;
    }
    .backdrop.show{
      opacity: 1;
      pointer-events: auto;
    }

    .mobileControls{
      display:none;
      flex-direction: column;
      align-items:flex-end;
      gap: 8px;
      min-width: 120px;
    }

    .filterBtn{
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color: white;
      font-weight: 900;
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      width: 100%;
    }

    .closeBtn{
      display:none;
      margin-top: 10px;
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color: white;
      font-weight: 900;
      cursor:pointer;
    }

    @media (max-width: 980px){
      .app{ grid-template-columns: 1fr; gap: 12px; padding: 12px; }

      .sidebar{
        position: fixed;
        top: 12px;
        bottom: 12px;
        left: 12px;
        width: min(360px, 88vw);
        height: auto;
        transform: translateX(-110%);
        transition: transform .18s ease;
        z-index: 50;
        border-radius: 20px;
      }
      .sidebar.open{ transform: translateX(0); }

      .closeBtn{ display:block; }
      .main{ min-height: auto; }

      .tabs{
        flex-direction: row;
        overflow-x: auto;
        padding-bottom: 6px;
      }
      .tab-btn{ min-width: max-content; white-space: nowrap; }

      .mobileControls{ display:flex; }
      .pet-grid{ grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); }
    }

    @media (max-width: 520px){
      .pet-grid{ grid-template-columns: 1fr; }
      #content{ padding: 12px; }
      .petImgWrap{ width: 76px; height: 76px; }
      .heroTitle{ font-size: 18px; }
    }
  </style>
</head>

<body>
  <div class="backdrop" id="backdrop"></div>

  <div class="app">
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="brandMark">VALUES</div>
        <div>
          <div class="brandTitle">John’s Values</div>
          <div class="brandSub">Tap Simulator • Value List</div>
        </div>
      </div>

      <div class="meta">
        <div class="metaLine">Made by <b>John</b> &amp; <b>Raydes</b></div>
        <a class="discordBtn" href="https://discord.gg/johntapsim" target="_blank" rel="noopener">Join Discord for feedback</a>
        <div class="updated">Last updated: <span id="lastUpdated"></span></div>
      </div>

      <div class="panel">
        <div class="panelTitle">Browse</div>
        <nav class="tabs" id="tabs"></nav>
      </div>

      <div class="panel">
        <div class="panelTitle">Search</div>
        <input id="searchInput" class="input" placeholder="Search pets..." />
        <div class="hint">Tip: try “Top”, “Frost”, “Candy”</div>
      </div>

      <div class="panel">
        <div class="panelTitle">Sort & Filters</div>
        <select id="sortSelect" class="input">
          <option value="">Sort</option>
          <option value="normal:low">Normal: Low → High</option>
          <option value="normal:high">Normal: High → Low</option>
          <option value="gold:low">Golden: Low → High</option>
          <option value="gold:high">Golden: High → Low</option>
          <option value="rainbow:low">Rainbow: Low → High</option>
          <option value="rainbow:high">Rainbow: High → Low</option>
          <option value="name:az">Name: A → Z</option>
          <option value="name:za">Name: Z → A</option>
        </select>

        <label class="check"><input type="checkbox" id="tradeableOnly"><span>Tradeable only (hide o/c)</span></label>
        <label class="check"><input type="checkbox" id="hasImageOnly"><span>Has image only</span></label>
        <button class="resetBtn" id="resetBtn">Reset filters</button>

        <button class="closeBtn" id="closeSidebarBtn">Close</button>
      </div>
    </aside>

    <main class="main">
      <header class="topbar">
        <div class="hero">
          <div class="heroTitle">Value List</div>
          <div class="heroSub">Suggest values or report mistakes in the Discord.</div>
          <div class="stats" id="stats"></div>
        </div>

        <div class="mobileControls">
          <button class="filterBtn" id="openSidebarBtn">Filters</button>
        </div>
      </header>

      <section id="content"></section>
    </main>

    <div class="toast" id="toast">Copied!</div>
  </div>

  <script>
    const PLACEHOLDER = "https://dummyimage.com/300x300/1a1a26/777777&text=Pet+Image";

    function getImgSrc(img) {
      if (!img) return PLACEHOLDER;
      if (img === "https://image-link") return PLACEHOLDER;
      return img;
    }

    function parseValue(v) {
      if (v === null || v === undefined) return null;
      if (typeof v === "number") return v;
      if (typeof v !== "string") return null;

      const s = v.trim().toLowerCase();
      if (s === "o/c" || s === "oc") return null;

      const kMatch = s.match(/^(\d+(\.\d+)?)k$/);
      if (kMatch) return Math.round(parseFloat(kMatch[1]) * 1000);

      const n = Number(s.replace(/,/g, ""));
      return Number.isFinite(n) ? n : null;
    }

    function formatValue(v) {
      if (v === null || v === undefined) return "—";
      if (typeof v === "string") return v;
      if (typeof v !== "number") return String(v);

      if (v >= 1000) {
        const k = v / 1000;
        const nice = (Math.round(k * 10) / 10).toString();
        return nice.endsWith(".0") ? `${Math.round(k)}k` : `${nice}k`;
      }
      return v.toString();
    }

    // ===== DATA =====
    // To set manually later, add: demand:"high"  OR  demand:"mid"  OR  demand:"low"
    const data = {
  leaderboard: [
    {name:"Top 10 Divine Celestina", demand:"high", normal:13000, gold:"o/c", rainbow:"o/c", img:"https://i.postimg.cc/zbFX9yRD/10.png"},
    {name:"Top 100 Silver Emperor", demand:"high", normal:1350, gold:5500, rainbow:6000, img:"https://i.postimg.cc/XBN73nw9/100.png"},
    {name:"Top 250 Trophy Guardian", demand:"high", normal:625, gold:2300, rainbow:2500, img:"https://i.postimg.cc/5Q9N1fww/250.png"},
    {name:"Top 10 Reindeer Emporer", demand:"mid", normal:10500, gold:"o/c", rainbow:"o/c", img:"https://8upload.com/image/dcd03e3b3d3fe07e/top_10.png"},
    {name:"Top 100 Snow Emperor", demand:"mid", normal:1200, gold:4600, rainbow:5000, img:"https://8upload.com/image/3b5c0a07efffa9dd/top_100.png"},
    {name:"Top 250 Snow Warrior", demand:"mid", normal:500, gold:1850, rainbow:1950, img:"https://8upload.com/image/d5d970cabf198b70/top_250.png"}
  ],

  permanent: [
    {name:"King Kraken", demand:"mid", normal:150, gold:700, rainbow:750, img:"https://i.postimg.cc/c6TLh8SY/kraken.png"},
    {name:"Orca Dominator", demand:"low", normal:35, gold:150, rainbow:200, img:"https://i.postimg.cc/pykLCnHC/orca.png"},
    {name:"Chocolate Maurader", demand:"low", normal:75, gold:325, rainbow:350, img:"https://i.postimg.cc/1VR5Pypc/choco.png"},
    {name:"Candy God", demand:"low", normal:35, gold:150, rainbow:175, img:"https://i.postimg.cc/ct14ZdQm/candy.png"},
    {name:"Magmasaur", demand:"low", normal:40, gold:175, rainbow:200, img:"https://i.postimg.cc/Hj3kz7gX/magmasaur.png"},
    {name:"Raging Claw", demand:"low", normal:50, gold:250, rainbow:300, img:"https://i.postimg.cc/NLQ0RkWL/claw.png"},
    {name:"Luminary Star", demand:"mid", normal:125, gold:450, rainbow:500, img:"https://i.postimg.cc/GByD2ZpT/luminary-star-watermarked.png"},
    {name:"Cosmic Chaos", demand:"high", normal:475, gold:2100, rainbow:2250, img:"https://i.postimg.cc/3k6p3KYs/cosmic-star-watermarked.png"}
  ],

  limited: [
    {name:"Frosty Snowman", 
      demand:"mid", normal:100, gold:425, rainbow:450, img:"https://i.postimg.cc/dLxtPPD1/snowman.png"},
    {name:"5M North Star", demand:"mid", normal:200, gold:900, rainbow:1000, img:"https://i.postimg.cc/vZQ1nGs0/star.png"},
    {name:"5M Frost Monarch", demand:"high", normal:1200, gold:4500, rainbow:4750, img:"https://i.postimg.cc/8swz4rSY/monarch.png"},
    {name:"Frost Spirit", demand:"low", normal:40, gold:80, rainbow:160, img:"https://i.postimg.cc/56cCfdX9/frost-spitirrrr.png"},
    {name:"Christmas Tree", demand:"mid", normal:90, gold:375, rainbow:400, img:"https://i.postimg.cc/ct3tfT55/christmas-tree.png"},
    {name:"Gilded Seraphim", demand:"mid", normal:900, gold:3750, rainbow:4000, img:"https://i.postimg.cc/8jhr5KvM/seraphim.png"},
    {name:"2026 Baloons", demand:"mid", normal:130, gold:500, rainbow:540, img:"https://8upload.com/image/a60ddf8525331343/balloon.png"},
    {name:"New Year Dragon", demand:"high", normal:500, gold:2200, rainbow:2500, img:"https://8upload.com/image/c25a161a1aa044a2/dragon.png"},
    {name:"2026 Overlord", demand:"high", normal:1300, gold:5750, rainbow:6150, img:"https://8upload.com/image/fc452cccc3817230/overlord.png"}
  ],

  mythics: [
    {name:"Starshine Warrior", demand:"mid", normal:2, gold:5, rainbow:10, img:"https://tapinvalue.gamer.gd/nymyth.png"}
  ],

  exclusives: [
    {name:"Kairos", demand:"mid", normal:80, gold:250, rainbow:300, img:"https://i.postimg.cc/XXnv9kTC/kairos.png"},
    {name:"Paradox", demand:"mid", normal:100, gold:450, rainbow:500, img:"https://i.postimg.cc/RqGZdnBy/paradox.png"},
    {name:"Chronos", demand:"high", normal:10000, gold:"o/c", rainbow:"o/c", img:"https://i.postimg.cc/SjmKcfwQ/chronos.png"},
    {name:"Krampus", demand:"high", normal:2300, gold:9500, rainbow:10000, img:"https://i.postimg.cc/1fpNtCFP/krampus.png"},
    {name:"Evil Snowman", demand:"mid", normal:100, gold:300, rainbow:350, img:"https://i.postimg.cc/y3R30nrM/90.png"},
    {name:"Snow Thief", demand:"low", normal:50, gold:200, rainbow:250, img:"https://i.postimg.cc/QK7KcSnv/80.png"},
    {name:"Celestial Candycane", demand:"high", normal:900, gold:4000, rainbow:4200, img:"https://i.postimg.cc/bSnS1LBc/candy.png"},
    {name:"Gift Mimic", demand:"low", normal:50, gold:200, rainbow:250, img:"https://i.postimg.cc/8FkvxRjC/75.png"},
    {name:"Hooded Krampus", demand:"mid", normal:500, gold:2000, rainbow:2100, img:"https://i.postimg.cc/0bpJQWSS/hooded.png"},
    {name:"Disco Lord", demand:"mid", normal:1200, gold:4500, rainbow:5000, img:"https://8upload.com/image/49098f59873d3dc0/disco.png"}
  ]
};


    // Randomly assign demand to every pet (you can edit later by setting demand:"high"/"mid"/"low")
    function assignRandomDemand(){
      const choices = ["high","mid","low"];
      for (const key in data){
        const arr = data[key];
        if (!Array.isArray(arr)) continue;
        arr.forEach(p => {
          if (!p.demand) p.demand = choices[Math.floor(Math.random()*choices.length)];
        });
      }
    }
    assignRandomDemand();

    // ===== TABS =====
    const TAB_CONFIG = [
      { key: "leaderboard", label: "Leaderboard Pets", accent: ["#46d6ff","#7c4dff"] },
      { key: "permanent", label: "Permanent Secrets", accent: ["#ff4d8d","#7c4dff"] },
      { key: "limited", label: "Limited Secrets", accent: ["#54ff9b","#46d6ff"] },
      { key: "mythics", label: "Mythics", accent: ["#ffd24d","#ff4d8d"] },
      { key: "exclusives", label: "Exclusives", accent: ["#7c4dff","#46d6ff"] }
    ];

    let currentTab = "leaderboard";
    const el = (id) => document.getElementById(id);

    function setAccentForTab(tabKey){
      const t = TAB_CONFIG.find(x => x.key === tabKey) || TAB_CONFIG[0];
      document.documentElement.style.setProperty("--accent", t.accent[0]);
      document.documentElement.style.setProperty("--accent2", t.accent[1]);
    }

    function buildTabs() {
      const tabs = el("tabs");
      tabs.innerHTML = "";
      TAB_CONFIG.forEach(t => {
        const btn = document.createElement("button");
        btn.className = "tab-btn";
        btn.textContent = t.label;
        btn.onclick = () => {
          showTab(t.key);
          closeSidebar();
        };
        tabs.appendChild(btn);
      });
      updateActiveTabUI();
    }

    function updateActiveTabUI() {
      const buttons = document.querySelectorAll(".tab-btn");
      buttons.forEach((b, i) => {
        const key = TAB_CONFIG[i].key;
        b.classList.toggle("active", key === currentTab);
      });
    }

    function toast(msg){
      const t = el("toast");
      t.textContent = msg;
      t.classList.add("show");
      setTimeout(() => t.classList.remove("show"), 1300);
    }

    function copyPet(p){
      const d = (p.demand || "mid").toString().toLowerCase();
      const demandText = (d === "high") ? "High" : (d === "low") ? "Low" : "Mid";
      const text = `${p.name}\nNormal: ${p.normal}\nGolden: ${p.gold}\nRainbow: ${p.rainbow}\nDemand: ${demandText}`;
      navigator.clipboard.writeText(text).then(() => toast("Copied values ✅"));
    }

    function applySort(list, sortValue){
      if (!sortValue) return list;
      const [field, dir] = sortValue.split(":");

      const byNum = (a, b, get) => {
        const av = get(a);
        const bv = get(b);
        if (av === null && bv === null) return 0;
        if (av === null) return 1;
        if (bv === null) return -1;
        return dir === "low" ? av - bv : bv - av;
      };

      const byName = (a, b) => {
        const an = a.name.toLowerCase();
        const bn = b.name.toLowerCase();
        return dir === "az" ? an.localeCompare(bn) : bn.localeCompare(an);
      };

      const cloned = [...list];
      if (field === "name") return cloned.sort(byName);
      if (field === "normal") return cloned.sort((a,b) => byNum(a,b, x => parseValue(x.normal)));
      if (field === "gold") return cloned.sort((a,b) => byNum(a,b, x => parseValue(x.gold)));
      if (field === "rainbow") return cloned.sort((a,b) => byNum(a,b, x => parseValue(x.rainbow)));
      return cloned;
    }

    function getFilteredList(){
      const grid = data[currentTab];
      if (!Array.isArray(grid)) return [];

      const q = el("searchInput").value.toLowerCase().trim();
      const tradeableOnly = el("tradeableOnly").checked;
      const hasImageOnly = el("hasImageOnly").checked;

      let list = grid.filter(p => !q || p.name.toLowerCase().includes(q));
      if (tradeableOnly) list = list.filter(p => parseValue(p.normal) !== null);
      if (hasImageOnly) list = list.filter(p => p.img && p.img !== "https://image-link");

      return applySort(list, el("sortSelect").value);
    }

    function demandInfo(p){
      const raw = (p.demand || "mid").toString().toLowerCase();
      const key = (raw === "high" || raw === "h") ? "high" : (raw === "low" || raw === "l") ? "low" : "mid";
      const text = key === "high" ? "High" : key === "low" ? "Low" : "Mid";
      return { key, text };
    }

    function render() {
      const list = getFilteredList();
      const total = (data[currentTab] || []).length;
      const shown = list.length;
      const tradeableCount = list.filter(p => parseValue(p.normal) !== null).length;

      /* ✅ removed "Tab: ..." pill */
      el("stats").innerHTML = `
        <div class="pill">Showing: <b>${shown}</b> / ${total}</div>
        <div class="pill">Tradeable: <b>${tradeableCount}</b></div>
      `;

      if (!shown){
        el("content").innerHTML = `<div style="color:#b8b8c8;padding:18px;">No pets match your filters.</div>`;
        return;
      }

      el("content").innerHTML =
        `<div class="pet-grid">` +
        list.map(p => {
          const imgSrc = getImgSrc(p.img);
          const d = demandInfo(p);

          return `
            <div class="pet-card">
              <div class="petHead">
                <div class="petImgWrap">
                  <img src="${imgSrc}" alt="${p.name}" onerror="this.onerror=null;this.src='${PLACEHOLDER}';">
                </div>
                <div class="petTitle">
                  <h3>${p.name}</h3>

                  <!-- ✅ only demand (no tab tag, no normal badge) -->
                  <div class="tagRow">
                    <span class="tag demand ${d.key}">Demand: ${d.text}</span>
                  </div>
                </div>
              </div>

              <div class="table">
                <div class="row"><span>Normal</span><span class="n">${formatValue(parseValue(p.normal) ?? p.normal)}</span></div>
                <div class="row"><span>Golden</span><span class="g">${formatValue(parseValue(p.gold) ?? p.gold)}</span></div>
                <div class="row"><span>Rainbow</span><span class="r">${formatValue(parseValue(p.rainbow) ?? p.rainbow)}</span></div>
              </div>

              <div class="actions">
                <button class="btn primary" onclick='copyPet(${JSON.stringify(p)})'>Copy</button>
                <a class="btn" href="https://discord.gg/johntapsim" target="_blank" rel="noopener">Suggest</a>
              </div>
            </div>
          `;
        }).join("") +
        `</div>`;
    }

    function showTab(tab) {
      currentTab = tab;
      setAccentForTab(tab);
      updateActiveTabUI();
      render();
    }

    // ===== MOBILE SIDEBAR OPEN/CLOSE =====
    const sidebar = el("sidebar");
    const backdrop = el("backdrop");

    function openSidebar(){
      sidebar.classList.add("open");
      backdrop.classList.add("show");
      document.body.classList.add("noScroll");
    }
    function closeSidebar(){
      sidebar.classList.remove("open");
      backdrop.classList.remove("show");
      document.body.classList.remove("noScroll");
    }

    el("openSidebarBtn").addEventListener("click", openSidebar);
    el("closeSidebarBtn").addEventListener("click", closeSidebar);
    backdrop.addEventListener("click", closeSidebar);

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeSidebar();
    });

    // Controls
    el("resetBtn").addEventListener("click", () => {
      el("searchInput").value = "";
      el("sortSelect").value = "";
      el("tradeableOnly").checked = false;
      el("hasImageOnly").checked = false;
      render();
    });

    el("searchInput").addEventListener("input", render);
    el("sortSelect").addEventListener("change", render);
    el("tradeableOnly").addEventListener("change", render);
    el("hasImageOnly").addEventListener("change", render);

    // Last updated
    el("lastUpdated").textContent = new Date().toLocaleDateString();

    // Init
    buildTabs();
    showTab("leaderboard");
  </script>
</body>
</html>
